const musicData = [
   {
      songSrc: "../../data/Music/Ckay - Love Nwantiti.mp3",
      imageSrc: "../../data/Images/Song_Profile/Ckay_Love_Nwantiti.jpg",
      songTitle: "Love Nwantiti",
      Artist: "Ckay",
      duration: "02:22",
      id: 11,
   },
   {
      songSrc: "../../data/Music/Ed Sheeran - Bad Habits.mp3",
      imageSrc: "../../data/Images/Song_Profile/Ed_Sheeran_Bad_Habits.jpg",
      songTitle: "Bad Habits",
      Artist: "Ed Sheeran",
      duration: "04:00",
      id: 12,
   },
   {
      songSrc: "../../data/Music/Ed Sheeran - Photograph.mp3",
      imageSrc: "../../data/Images/Song_Profile/Ed_Sheeran_Photograph.jpg",
      songTitle: "Photograph",
      Artist: "Ed Sheeran",
      duration: "04:19",
      id: 13,
   },
   {
      songSrc: "../../data/Music/Adele - Cry Your Heart Out.mp3",
      imageSrc: "../../data/Images/Song_Profile/Adele_Cry_Your_Heart_Out.jpg",
      songTitle: "Cry Your Heart Out",
      Artist: "Adele",
      duration: "04:16",
      id: 1,
   },
   {
      songSrc: "../../data/Music/Adele - Easy On Me.mp3",
      imageSrc: "../../data/Images/Song_Profile/Adele_Easy_On_Me.jpg",
      songTitle: "Easy On Me",
      Artist: "Adele",
      duration: "05:31",
      id: 2,
   },
   {
      songSrc: "../../data/Music/Adele - Hello.mp3",
      imageSrc: "../../data/Images/Song_Profile/Adele_Hello.jpg",
      songTitle: "Hello",
      Artist: "Adele",
      duration: "06:06",
      id: 3,
   },
   {
      songSrc: "../../data/Music/Grain in Ear - By Mang Chung.m4a",
      imageSrc: "../../data/Images/Song_Profile/Grain_in_Ear_Mang_Chung.jpg",
      songTitle: "Grain in Ear",
      Artist: "Mang Chung",
      duration: "03:39",
      id: 4,
   },
   {
      songSrc: "../../data/Music/Adele - Oh My God.mp3",
      imageSrc: "../../data/Images/Song_Profile/Adele_Oh_My_God.jpg",
      songTitle: "Oh My God",
      Artist: "Adele",
      duration: "03:52",
      id: 5,
   },
   {
      songSrc: "../../data/Music/Adele - Rolling In The Deep.mp3",
      imageSrc: "../../data/Images/Song_Profile/Adele_Rolling_In_The_Deep.jpg",
      songTitle: "Rolling In The Deep",
      Artist: "Adele",
      duration: "03:53",
      id: 6,
   },
   {
      songSrc: "../../data/Music/Adele - Send My Love.mp3",
      imageSrc: "../../data/Images/Song_Profile/Adele_Send_My_Love.jpg",
      songTitle: "Send My Love",
      Artist: "Adele",
      duration: "03:45",
      id: 7,
   },
   {
      songSrc: "../../data/Music/Adele - Someone Like You.mp3",
      imageSrc: "../../data/Images/Song_Profile/Adele_Someone_Lie_You.jpg",
      songTitle: "Someone Like You",
      Artist: "Adele",
      duration: "04:44",
      id: 8,
   },
   {
      songSrc: "../../data/Music/Adele - When We Were Young.mp3",
      imageSrc: "../../data/Images/Song_Profile/Adele_When_We_Were_Young.jpg",
      songTitle: "When We Were Young",
      Artist: "Adele",
      duration: "05:42",
      id: 9,
   },
   {
      songSrc: "../../data/Music/Big Bag - Nostalgia.mp3",
      imageSrc: "../../data/Images/Song_Profile/Big_Bag-Nostalgia.jpg",
      songTitle: "Nostalgia",
      Artist: "Big Bag",
      duration: "04:02",
      id: 10,
   },
   {
      songSrc: "../../data/Music/Ellie Goulding - Love Me Like You Do.mp3",
      imageSrc: "../../data/Images/Song_Profile/LovemeLikeYouDo.jpg",
      songTitle: "Love Me Like You Do",
      Artist: "Ellie Goulding",
      duration: "04:10",
      id: 14,
   },
   {
      songSrc: "../../data/Music/Gustixa - Be All Right.mp3",
      imageSrc: "../../data/Images/meta-background.jpg",
      songTitle: "Be All Right",
      Artist: "Gustixa",
      duration: "03:57",
      id: 15,
   },
   {
      songSrc: "../../data/Music/Gustixa - Happy (ft._Nida_Havia).mp3",
      imageSrc: "../../data/Images/meta-background.jpg",
      songTitle: "Happy",
      Artist: "Gustixa (ft.Nida Havia)",
      duration: "02:02",
      id: 16,
   },
   {
      songSrc: "../../data/Music/Gustixa - Kingdom (ft.Shalom Margaret).mp3",
      imageSrc: "../../data/Images/meta-background.jpg",
      songTitle: "Kingdom",
      Artist: "Gustixa (ft.Shalom Margaret)",
      duration: "03:04",
      id: 17,
   },
   {
      songSrc: "../../data/Music/Gustixa - Teenage Mona Lisa.mp3",
      imageSrc: "../../data/Images/meta-background.jpg",
      songTitle: "Teenage Mona Lisa",
      Artist: "Gustixa",
      duration: "02:52",
      id: 18,
   },
   {
      songSrc: "../../data/Music/MAGIC! - Rude.mp3",
      imageSrc: "../../data/Images/Song_Profile/MAGIC!_Rude.jpg",
      songTitle: "Rude",
      Artist: "MAGIC!",
      duration: "04:26",
      id: 19,
   },
   {
      songSrc: "../../data/Music/Maneskin - Beggin'.mp3",
      imageSrc: "../../data/Images/Song_Profile/Maneskin_Beggin.jpg",
      songTitle: "Beggin'",
      Artist: "Maneskin",
      duration: "03:31",
      id: 20,
   },
   {
      songSrc: "../../data/Music/One Direction - Night Changes (ft.Alsa).mp3",
      imageSrc: "../../data/Images/Song_Profile/One_Direction_Night_Changes.jpg",
      songTitle: "Night Changes",
      Artist: "One Direction (ft.Alsa)",
      duration: "02:45",
      id: 21,
   },
   {
      songSrc: "../../data/Music/Royal & the Serpent - Overwhelmed.mp3",
      imageSrc: "../../data/Images/Song_Profile/Royal_the_Serpent_Overwhelmed.jpg",
      songTitle: "Overwhelmed",
      Artist: "Royal & the Serpent",
      duration: "03:17",
      id: 22,
   },
   {
      songSrc: "../../data/Music/Takayan - Can't Stop Escapism.mp3",
      imageSrc: "../../data/Images/Song_Profile/Takayan_01.jpg",
      songTitle: "Can't Stop Escapism",
      Artist: "Takayan",
      duration: "04:10",
      id: 23,
   },
   {
      songSrc: "../../data/Music/Takayan - Cheating is Crime.mp3",
      imageSrc: "../../data/Images/Song_Profile/Takayan_02.jpg",
      songTitle: "Cheating is Crime",
      Artist: "Takayan",
      duration: "01:52",
      id: 24,
   },
   {
      songSrc: "../../data/Music/Takayan - Falling Deeper In Love Than Any Other Fan.mp3",
      imageSrc: "../../data/Images/Song_Profile/Takayan_03.jpg",
      songTitle: "Falling Deeper In Love Than Any Other Fan",
      Artist: "Takayan",
      duration: "02:21",
      id: 25,
   },
   {
      songSrc: "../../data/Music/Takayan - Just disappear.mp3",
      imageSrc: "../../data/Images/Song_Profile/Takayan_04.jpg",
      songTitle: "Just Disappear",
      Artist: "Takayan",
      duration: "02:52",
      id: 26,
   },
   {
      songSrc: "../../data/Music/Takayan - Look only at me.mp3",
      imageSrc: "../../data/Images/Song_Profile/Takayan_05.jpg",
      songTitle: "Look Only At Me",
      Artist: "Takayan",
      duration: "01:42",
      id: 27,
   },
   {
      songSrc: "../../data/Music/Takayan - Toy.mp3",
      imageSrc: "../../data/Images/Song_Profile/Takayan_06.jpg",
      songTitle: "Toy",
      Artist: "Takayan",
      duration: "03:17",
      id: 28,
   },
   {
      songSrc: "../../data/Music/Takayan - What is the meaning of living.mp3",
      imageSrc: "../../data/Images/Song_Profile/Takayan_07.jpg",
      songTitle: "What is the Meaning of Living",
      Artist: "Takayan",
      duration: "01:46",
      id: 29,
   },
   {
      songSrc: "../../data/Music/Zaw Paing - Thingyan Moe.mp3",
      imageSrc: "../../data/Images/Song_Profile/Zaw_Paing_Thingyan_Moe.jpg",
      songTitle: "Thingyan Moe",
      Artist: "Zaw Paing",
      duration: "05:19",
      id: 30,
   },
];

const albumData = [
   {
      Artist: "Adele",
      imageSrc: "../../data/Images/Song_Profile/Adele_Rolling_In_The_Deep.jpg",
      id: 101,
   },
   {
      Artist: "Ed Sheeran",
      imageSrc: "../../data/Images/Song_Background/ed.jpg",
      id: 102,
   },
   {
      Artist: "Gustixa",
      imageSrc: "../../data/Images/Song_Background/gustixa.jpg",
      id: 103,
   },
   {
      Artist: "Takayan",
      imageSrc: "../../data/Images/Song_Profile/Takayan_02.jpg",
      id: 104,
   },
];

// Audio Playlist Album Progress
const audioTag = new Audio();
const playlistSongContainer = document.querySelector(".playlist-song-container");
const albumContainer = document.querySelector(".album-song-container");
const progressBarContainer = document.querySelector(".progress-bar-container");
const currentArtistName = document.querySelector(".current-artist-name");
const currentSongName = document.querySelector(".current-song-name");
const currentBackgroundImg = document.querySelector(".current-song-content-background");

// Buttons
const startBtn = document.querySelectorAll(".start-btn-container");
const pauseBtn = document.querySelectorAll(".pause-btn-container");
const currentStartBtn = document.querySelector(".current-start-btn-container");
const currentPauseBtn = document.querySelector(".current-pause-btn-container");
const progressStartBtn = document.querySelector(".progress-start-btn-container");
const progressPauseBtn = document.querySelector(".progress-pause-btn-container");

// For Checking
let isClicked; // To toggle Start Pause Button

// To Toggle Start Pause Buttons
function startPauseBtnFun() {
   if (!isClicked) {
      currentStartBtn.style.display = "none";
      currentPauseBtn.style.display = "block";
      progressStartBtn.style.display = "none";
      progressPauseBtn.style.display = "block";
      audioTag.play();
      isClicked = true;
   } else {
      currentStartBtn.style.display = "block";
      currentPauseBtn.style.display = "none";
      progressStartBtn.style.display = "block";
      progressPauseBtn.style.display = "none";
      audioTag.pause();
      isClicked = false;
   }
}

// To Play and Pause the Audio
function pauseStartClick(btnType) {
   btnType.addEventListener("click", () => {
      startPauseBtnFun();
   });
}

let playListBackgroundCurrentId;

pauseStartClick(currentPauseBtn);
pauseStartClick(currentStartBtn);
pauseStartClick(progressPauseBtn);
pauseStartClick(progressStartBtn);

// Current Playlist Song Background
function playListSongBackgroundStart(target) {
   target.classList.add("playlist-song-background");
   playListBackgroundCurrentId = target.id;
}
function playListSongBackgroundStop(target) {
   target.classList.remove("playlist-song-background");
}

// Playlist Showcase Output
function objectDataChangeFun(object) {
   playlistSongContainer.innerHTML = "";
   object.map((data) => {
      // Interface Output
      const playlistContainerTag = document.createElement("div");
      const underlineTag = document.createElement("hr");
      playlistContainerTag.classList.add("playlist-song");
      playlistContainerTag.id = data.id;

      // Sound Output
      playlistContainerTag.addEventListener("click", function (e) {
         if (this.classList.contains("playlist-song-container")) {
         } else {
            let clickedPlaylist = this.id;

            if (!isClicked) {
               currentStartBtn.style.display = "none";
               currentPauseBtn.style.display = "block";
               progressStartBtn.style.display = "none";
               progressPauseBtn.style.display = "block";
               const songsrc = data.songSrc;

               if (
                  playListBackgroundCurrentId == undefined ||
                  playListBackgroundCurrentId == ""
               ) {
                  playListSongBackgroundStart(this);
               } else {
                  document
                     .getElementById(`${playListBackgroundCurrentId}`)
                     .classList.remove("playlist-song-background");
                  playListSongBackgroundStart(this);
               }

               audioTag.src = songsrc;
               audioTag.play();

               if (clickedPlaylist == data.id) {
                  let artistName = data.Artist;
                  let songName = data.songTitle;
                  let imgSorce = data.imageSrc;

                  currentArtistName.innerText = artistName;
                  currentSongName.innerText = songName;
                  currentBackgroundImg.style.backgroundImage = `url(${imgSorce})`;
               }
               progressBarContainer.classList.add("progress-bar-animate");
               isClicked = true;
            } else {
               let songNameForCondition = document.querySelector(".current-song-name");
               if (songNameForCondition.innerText == data.songTitle) {
                  currentStartBtn.style.display = "block";
                  currentPauseBtn.style.display = "none";
                  progressStartBtn.style.display = "block";
                  progressPauseBtn.style.display = "none";

                  audioTag.pause();
                  playListSongBackgroundStop(this);
                  isClicked = false;
               } else {
                  if (clickedPlaylist == data.id) {
                     let artistName = data.Artist;
                     let songName = data.songTitle;
                     let imgSorce = data.imageSrc;

                     currentArtistName.innerText = artistName;
                     currentSongName.innerText = songName;
                     currentBackgroundImg.style.backgroundImage = `url(${imgSorce})`;
                  }
                  audioTag.src = data.songSrc;

                  const removeBackground = document.getElementById(
                     playListBackgroundCurrentId
                  );

                  if (removeBackground == null) {
                     playListSongBackgroundStart(this);
                     audioTag.play();
                     isClicked = true;
                  } else {
                     removeBackground.classList.remove("playlist-song-background");

                     playListSongBackgroundStart(this);
                     audioTag.play();
                     isClicked = true;
                  }
               }
            }
         }
      });
      const playListSongTag = `
        <div class="playlist-content-container">
           <div class="song-profile-img-container">
              <img
                 src=${data.imageSrc}
                 alt=""
                 class="song-profile-img"
              />
           </div>
           <div class="playlist-text">
              <div class="song-name">${data.songTitle}</div>
              <div class="artist-name">${data.Artist}</div>
           </div>
        </div>
        <div class="playlist-song-duration">${data.duration}</div>
        `;
      playlistContainerTag.innerHTML = playListSongTag;
      playlistSongContainer.append(playlistContainerTag, underlineTag);
   });
}

objectDataChangeFun(musicData);

// Albums Showcase Output
const album_data = albumData.map((data) => {
   const album = document.createElement("div");
   album.classList.add("album");
   album.id = data.id;
   const underlineTag = document.createElement("hr");
   const albumSongTag = `
     <div class="album-content-container">
        <div class="album-profile-img-container">
           <div class="album-profile-img">
              <img src="${data.imageSrc}" alt="" class="album-img" />
           </div>
 
           <div class="artist-name album-artist-name">${data.Artist}</div>
        </div>
     </div>
     <div class="album-choose-icon-container">
        <i class="fa-solid fa-chevron-right"></i>
     </div>
 `;
   album.innerHTML += albumSongTag;
   albumContainer.append(album, underlineTag);
});
//

const artistName = document.querySelectorAll(".album-artist-name");
const album = document.querySelectorAll(".album");
let isAlbumClicked = true;
let lastClickedAlbumId;

album.forEach((album) => {
   album.addEventListener("click", function (e) {
      playListBackgroundCurrentId = "";
      //album filter
      let albumFilter = musicData.filter((data) => {
         return data.Artist == this.innerText;
      });
      objectDataChangeFun(albumFilter);
      const albumArrowBtn = this.children[1].children[0];
      const albumCurretnImg = this.children[0].children[0].children[0].children[0];

      if (lastClickedAlbumId == null) {
         lastClickedAlbumId = this.id;
         albumArrowBtn.classList.toggle("albumArrowanimation");
         albumCurretnImg.classList.toggle("albumImganimation");
      } else {
         let lastClickedAlbum = document.getElementById(`${lastClickedAlbumId}`);
         let lastClickedArrowBtn = lastClickedAlbum.children[1].children[0];
         let lastClickedCurrentImg =
            lastClickedAlbum.children[0].children[0].children[0].children[0];

         lastClickedArrowBtn.classList.remove("albumArrowanimation");
         lastClickedCurrentImg.classList.remove("albumImganimation");

         albumArrowBtn.classList.toggle("albumArrowanimation");
         albumCurretnImg.classList.toggle("albumImganimation");
         lastClickedAlbumId = this.id;
      }
   });
});
// view all section
const viewAll = document.querySelector(".view-all");

viewAll.addEventListener("click", () => {
   let lastClickedAlbum = document.getElementById(`${lastClickedAlbumId}`);
   let lastClickedArrowBtn = lastClickedAlbum.children[1].children[0];
   let lastClickedCurrentImg =
      lastClickedAlbum.children[0].children[0].children[0].children[0];

   lastClickedArrowBtn.classList.remove("albumArrowanimation");
   lastClickedCurrentImg.classList.remove("albumImganimation");

   objectDataChangeFun(musicData);
});

// Backward & Forward Btn Process

const backwardBtn = document.querySelector(".fa-backward-step");
const forwardBtn = document.querySelector(".fa-forward-step");

forwardBtn.addEventListener("click", (e) => {
   let playList = document.querySelectorAll(".playlist-song");
   for (let i = 0; i < playList.length; i++) {
      let song = playList[i];
      if (song.nextSibling.nextSibling == null) {
         song.classList.remove("playlist-song-background");

         let firstSong = playList[0];
         let firstSongId = firstSong.id;
         firstSong.classList.add("playlist-song-background");
         playListBackgroundCurrentId = firstSongId;
         currentStartBtn.style.display = "none";
         currentPauseBtn.style.display = "block";
         progressStartBtn.style.display = "none";
         progressPauseBtn.style.display = "block";

         musicData.forEach((data) => {
            if (data.id == firstSongId) {
               audioTag.src = data.songSrc;
               audioTag.play();

               let artistName = data.Artist;
               let songName = data.songTitle;
               let imgSorce = data.imageSrc;

               currentArtistName.innerText = artistName;
               currentSongName.innerText = songName;
               currentBackgroundImg.style.backgroundImage = `url(${imgSorce})`;
            }
         });
      } else {
         if (song.classList.contains("playlist-song-background")) {
            song.classList.remove("playlist-song-background");

            let nextSong = song.nextSibling.nextSibling;
            nextSong.classList.add("playlist-song-background");
            let nextSongId = song.nextSibling.nextSibling.id;
            musicData.forEach((data) => {
               if (data.id == nextSongId) {
                  currentStartBtn.style.display = "none";
                  currentPauseBtn.style.display = "block";
                  progressStartBtn.style.display = "none";
                  progressPauseBtn.style.display = "block";
                  audioTag.src = data.songSrc;
                  audioTag.play();
                  playListBackgroundCurrentId = nextSongId;
                  let artistName = data.Artist;
                  let songName = data.songTitle;
                  let imgSorce = data.imageSrc;

                  currentArtistName.innerText = artistName;
                  currentSongName.innerText = songName;
                  currentBackgroundImg.style.backgroundImage = `url(${imgSorce})`;
                  isClicked = true;
               }
            });
            return;
         }
      }
   }
});

backwardBtn.addEventListener("click", () => {
   let playList = document.querySelectorAll(".playlist-song");
   for (let i = 0; i < playList.length; i++) {
      let song = playList[i];
      if (playList[0].classList.contains("playlist-song-background")) {
         playList[0].classList.remove("playlist-song-background");
         let lastSong = playList[playList.length - 1];
         let lastSongId = lastSong.id;
         musicData.map((data) => {
            if (lastSongId == data.id) {
               lastSong.classList.add("playlist-song-background");
               let lastSongSrc = data.songSrc;
               audioTag.src = lastSongSrc;
               audioTag.play();
               let artistName = data.Artist;
               let songName = data.songTitle;
               let imgSorce = data.imageSrc;
               currentArtistName.innerText = artistName;
               currentSongName.innerText = songName;
               currentBackgroundImg.style.backgroundImage = `url(${imgSorce})`;
               currentStartBtn.style.display = "none";
               currentPauseBtn.style.display = "block";
               progressStartBtn.style.display = "none";
               progressPauseBtn.style.display = "block";
               playListBackgroundCurrentId = lastSong.id;
            }
         });
         return;
      } else {
         if (song.classList.contains("playlist-song-background")) {
            let lastSong = song.previousSibling.previousSibling;
            let currentSong = lastSong;
            const lastSongId = currentSong.id;
            musicData.map((data) => {
               if (lastSongId == data.id) {
                  song.classList.remove("playlist-song-background");
                  currentSong.classList.add("playlist-song-background");
                  let currentSongSrc = data.songSrc;
                  audioTag.src = currentSongSrc;
                  audioTag.play();
                  let artistName = data.Artist;
                  let songName = data.songTitle;
                  let imgSorce = data.imageSrc;
                  currentArtistName.innerText = artistName;
                  currentSongName.innerText = songName;
                  currentBackgroundImg.style.backgroundImage = `url(${imgSorce})`;
                  currentStartBtn.style.display = "none";
                  currentPauseBtn.style.display = "block";
                  progressStartBtn.style.display = "none";
                  progressPauseBtn.style.display = "block";
                  playListBackgroundCurrentId = lastSongId;
               }
            });
            return;
         } else {
         }
      }
   }
});
audioTag.addEventListener("ended", () => {
   let playList = document.querySelectorAll(".playlist-song");
   for (let i = 0; i < playList.length; i++) {
      song = playList[i];
      if (song.classList.contains("playlist-song-background")) {
         let nextSong = song.nextSibling.nextSibling;
         let nextSongId = nextSong.id;
         musicData.map((data) => {
            if (nextSongId == data.id) {
               console.log(data.songSrc);
               audioTag.src = data.songSrc;
               audioTag.play();
               song.classList.remove("playlist-song-background");
               nextSong.classList.add("playlist-song-background");
               let artistName = data.Artist;
               let songName = data.songTitle;
               let imgSorce = data.imageSrc;
               currentArtistName.innerText = artistName;
               currentSongName.innerText = songName;
               currentBackgroundImg.style.backgroundImage = `url(${imgSorce})`;
               currentStartBtn.style.display = "none";
               currentPauseBtn.style.display = "block";
               progressStartBtn.style.display = "none";
               progressPauseBtn.style.display = "block";
               playListBackgroundCurrentId = nextSongId;
            }
         });
         return;
      }
   }
});
//progress bar section
const progressBar = document.querySelector(".progress-bar");
const progressing = document.querySelector(".progressing");
let progressBarWidth = 500;
let totalDuration;
audioTag.addEventListener("timeupdate", (e) => {
   let currentTime = Math.floor(audioTag.currentTime);
   totalDuration = Math.floor(audioTag.duration);

   let updatedTimeWidth = (currentTime / totalDuration) * progressBarWidth;
   let updatedTimeWidthPercentage = Math.floor(
      (updatedTimeWidth / progressBarWidth) * 100
   );
   progressing.style.width = `${updatedTimeWidthPercentage}%`;
});

progressBar.addEventListener("click", (e) => {
   let clickedWidth = e.clientX - progressBar.offsetLeft;
   let currentClickedTime = Math.floor((clickedWidth / progressBarWidth) * totalDuration);
   audioTag.currentTime = currentClickedTime;
});
//progress bar section
